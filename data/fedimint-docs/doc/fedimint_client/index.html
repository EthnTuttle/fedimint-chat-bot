<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Client library for fedimintd"><meta name="keywords" content="rust, rustlang, rust-lang, fedimint_client"><title>fedimint_client - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../fedimint_client/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../fedimint_client/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate fedimint_client</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">fedimint_client</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/fedimint_client/lib.rs.html#1-1498">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="client-library-for-fedimintd"><a href="#client-library-for-fedimintd">Client library for fedimintd</a></h2>
<p>This library provides a client interface to build module clients that can be
plugged together into a fedimint client that exposes a high-level interface
for application authors to integrate with.</p>
<h3 id="module-clients"><a href="#module-clients">Module Clients</a></h3>
<p>Module clients have to at least implement the <a href="module/trait.ClientModule.html" title="module::ClientModule"><code>module::ClientModule</code></a> trait
and a factory struct implementing <a href="module/gen/trait.ClientModuleGen.html" title="module::gen::ClientModuleGen"><code>module::gen::ClientModuleGen</code></a>. The
<code>ClientModule</code> trait defines the module types (tx inputs, outputs, etc.) as
well as the module’s <a href="sm/trait.State.html">state machines</a>.</p>
<h4 id="state-machines"><a href="#state-machines">State machines</a></h4>
<p>State machines are spawned when starting operations and drive them
forward in the background. All module state machines are run by a central
<a href="sm/struct.Executor.html" title="sm::Executor"><code>sm::Executor</code></a>. This means typically starting an operation shall return
instantly.</p>
<p>For example when doing a deposit the function starting it would immediately
return a deposit address and a <a href="sm/struct.OperationId.html" title="OperationId"><code>OperationId</code></a> (important concept, highly
recommended to read the docs) while spawning a state machine checking the
blockchain for incoming bitcoin transactions. The progress of these state
machines can then be <em>observed</em> using the operation id, but no further user
interaction is required to drive them forward.</p>
<h4 id="state-machine-contexts"><a href="#state-machine-contexts">State Machine Contexts</a></h4>
<p>State machines have access to both a <a href="sm/trait.GlobalContext.html">global context</a> as
well as to a <a href="module/trait.ClientModule.html#tymethod.context">module-specific context</a>.</p>
<p>The global context provides access to the federation API and allows to claim
module outputs (and transferring the value into the client’s wallet), which
can be used for refunds.</p>
<p>The client-specific context can be used for other purposes, such as
supplying config to the state transitions or giving access to other APIs
(e.g. LN gateway in case of the lightning module).</p>
<h4 id="extension-traits"><a href="#extension-traits">Extension traits</a></h4>
<p>The modules themselves can only create inputs and outputs that then have to
be combined into transactions by the user and submitted via
<a href="struct.Client.html#method.finalize_and_submit_transaction" title="Client::finalize_and_submit_transaction"><code>Client::finalize_and_submit_transaction</code></a>. To make this easier most module
client implementations contain an extension trait which is implemented for
<a href="struct.Client.html" title="Client"><code>Client</code></a> and allows to create the most typical fedimint transactions with
a single function call.</p>
<p>To observe the progress each high level operation function should be
accompanied by one returning a stream of high-level operation updates.
Internally that stream queries the state machines belonging to the
operation to determine the high-level operation state.</p>
<h4 id="primary-modules"><a href="#primary-modules">Primary Modules</a></h4>
<p>Not all modules have the ability to hold money for long. E.g. the lightning
module and its smart contracts are only used to incentivize LN payments, not
to hold money. The mint module on the other hand holds e-cash note and can
thus be used to fund transactions and to absorb change. Module clients with
this ability should implement <a href="module/trait.ClientModule.html#method.supports_being_primary" title="ClientModule::supports_being_primary"><code>ClientModule::supports_being_primary</code></a> and
related methods.</p>
<p>For a example of a client module see <a href="https://github.com/fedimint/fedimint/blob/master/modules/fedimint-mint-client/src/lib.rs">the mint client</a>.</p>
<h3 id="client"><a href="#client">Client</a></h3>
<p>The <a href="struct.Client.html" title="Client"><code>Client</code></a> struct is the main entry point for application authors. It is
constructed using its builder which can be obtained via <a href="struct.Client.html#method.builder" title="Client::builder"><code>Client::builder</code></a>.
The supported module clients have to be chosen at compile time while the
actually available ones will be determined by the config loaded at runtime.</p>
<p>For a hacky instantiation of a complete client see the <a href="https://github.com/fedimint/fedimint/blob/55f9d88e17d914b92a7018de677d16e57ed42bf6/fedimint-cli/src/ng.rs#L56-L73"><code>ng</code> subcommand of <code>fedimint-cli</code></a>.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.derivable_secret"><code>pub use <a class="mod" href="../fedimint_derive_secret/index.html" title="mod fedimint_derive_secret">fedimint_derive_secret</a> as derivable_secret;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="backup/index.html" title="fedimint_client::backup mod">backup</a></div><div class="item-right docblock-short">Client backup</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="db/index.html" title="fedimint_client::db mod">db</a></div><div class="item-right docblock-short">Database keys used by the client</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="module/index.html" title="fedimint_client::module mod">module</a></div><div class="item-right docblock-short">Module client interface definitions</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="oplog/index.html" title="fedimint_client::oplog mod">oplog</a></div><div class="item-right docblock-short">Operation log subsystem of the client</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="secret/index.html" title="fedimint_client::secret mod">secret</a></div><div class="item-right docblock-short">Secret handling &amp; derivation</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="sm/index.html" title="fedimint_client::sm mod">sm</a></div><div class="item-right docblock-short">Client state machine interfaces and executor implementation</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="transaction/index.html" title="fedimint_client::transaction mod">transaction</a></div><div class="item-right docblock-short">Structs and interfaces to construct Fedimint transactions</div></div></div><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.sm_enum_variant_translation.html" title="fedimint_client::sm_enum_variant_translation macro">sm_enum_variant_translation</a></div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Client.html" title="fedimint_client::Client struct">Client</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClientBuilder.html" title="fedimint_client::ClientBuilder struct">ClientBuilder</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClientModuleInstance.html" title="fedimint_client::ClientModuleInstance struct">ClientModuleInstance</a></div><div class="item-right docblock-short">Resources particular to a module instance</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ClientSecret.html" title="fedimint_client::ClientSecret struct">ClientSecret</a></div><div class="item-right docblock-short">Secret input key material from which the <a href="../fedimint_derive_secret/struct.DerivableSecret.html" title="DerivableSecret"><code>DerivableSecret</code></a> used by the
client will be seeded</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DynGlobalClientContext.html" title="fedimint_client::DynGlobalClientContext struct">DynGlobalClientContext</a></div><div class="item-right docblock-short">Global state and functionality provided to all state machines running in the
client</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TransactionUpdates.html" title="fedimint_client::TransactionUpdates struct">TransactionUpdates</a></div><div class="item-right docblock-short">See <a href="struct.Client.html#method.transaction_updates" title="Client::transaction_updates"><code>Client::transaction_updates</code></a></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DatabaseSource.html" title="fedimint_client::DatabaseSource enum">DatabaseSource</a></div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.IGlobalClientContext.html" title="fedimint_client::IGlobalClientContext trait">IGlobalClientContext</a></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.client_decoders.html" title="fedimint_client::client_decoders fn">client_decoders</a></div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_client_root_secret.html" title="fedimint_client::get_client_root_secret fn">get_client_root_secret</a></div><div class="item-right docblock-short">Fetches the client secret from the database or generates a new one if
none is present</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_client_root_secret_encoding.html" title="fedimint_client::get_client_root_secret_encoding fn">get_client_root_secret_encoding</a></div><div class="item-right docblock-short">Fetches the client secret encoding from the database or generates a new one
if none is present</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.InstancelessDynClientInput.html" title="fedimint_client::InstancelessDynClientInput type">InstancelessDynClientInput</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.InstancelessDynClientOutput.html" title="fedimint_client::InstancelessDynClientOutput type">InstancelessDynClientOutput</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ModuleGlobalContextGen.html" title="fedimint_client::ModuleGlobalContextGen type">ModuleGlobalContextGen</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fedimint_client" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0 (fc594f156 2023-01-24)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>